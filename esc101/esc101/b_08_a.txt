<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #557799">#include&lt;stdio.h&gt;</span>

<span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">call</span>(<span style="color: #333399; font-weight: bold">long</span> <span style="color: #333399; font-weight: bold">int</span> out[], longint ans, <span style="color: #333399; font-weight: bold">int</span> i, <span style="color: #333399; font-weight: bold">int</span> j, <span style="color: #333399; font-weight: bold">int</span> n, <span style="color: #333399; font-weight: bold">int</span> m, <span style="color: #333399; font-weight: bold">int</span> a[n][m]){
    <span style="color: #008800; font-weight: bold">if</span>(i<span style="color: #333333">==</span>n){
        <span style="color: #008800; font-weight: bold">if</span>(ans<span style="color: #333333">&gt;</span>out[<span style="color: #0000DD; font-weight: bold">0</span>])
            out[<span style="color: #0000DD; font-weight: bold">0</span>]<span style="color: #333333">=</span>ans;
        <span style="color: #008800; font-weight: bold">return</span>;
    }
    ans<span style="color: #333333">+=</span>a[i][j];
    <span style="color: #008800; font-weight: bold">if</span>(j<span style="color: #333333">&gt;</span><span style="color: #0000DD; font-weight: bold">0</span>)
        call(out, ans, i<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>, j<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>, n, m, a);
    call(out, ans, i<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>, j, n, m, a);
    <span style="color: #008800; font-weight: bold">if</span>(j<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">&lt;</span>m)
        call(out, ans, i<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>, j<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>, n, m, a);
}

<span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">main</span>(){
    <span style="color: #333399; font-weight: bold">int</span> n,m;
    scanf(<span style="background-color: #fff0f0">&quot;%d %d&quot;</span>, <span style="color: #333333">&amp;</span>n, <span style="color: #333333">&amp;</span>m);
    
    <span style="color: #333399; font-weight: bold">int</span> a[n][m];
    
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> m; j<span style="color: #333333">++</span>)
            scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>a[i][j]);
    
    <span style="color: #333399; font-weight: bold">long</span> <span style="color: #333399; font-weight: bold">int</span> out[<span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">=</span>{<span style="color: #0000DD; font-weight: bold">0</span>};
    
    <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> t<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; t<span style="color: #333333">&lt;</span>m; t<span style="color: #333333">++</span>)
        call(out, <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">0</span>, t, n, m, a);
    
    printf(<span style="background-color: #fff0f0">&quot;%ld&quot;</span>, out[<span style="color: #0000DD; font-weight: bold">0</span>]);
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}
<span style="color: #333333">-----------------------------</span>
<span style="color: #557799">#include &lt;stdio.h&gt;</span>

<span style="color: #333399; font-weight: bold">int</span> n, m;

<span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">gas</span>(<span style="color: #333399; font-weight: bold">int</span> i, <span style="color: #333399; font-weight: bold">int</span> j, <span style="color: #333399; font-weight: bold">int</span> t, <span style="color: #333399; font-weight: bold">int</span> a[][m])
{
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> x <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; x <span style="color: #333333">&lt;</span> t; x<span style="color: #333333">++</span>)
    {
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> y <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; y <span style="color: #333333">&lt;</span> t; y<span style="color: #333333">++</span>)
        {
            <span style="color: #008800; font-weight: bold">if</span> (x <span style="color: #333333">==</span> y)
            {
                <span style="color: #008800; font-weight: bold">if</span> (a[i <span style="color: #333333">+</span> x][j <span style="color: #333333">+</span> y] <span style="color: #333333">!=</span> <span style="color: #0000DD; font-weight: bold">1</span>)
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
            }
            <span style="color: #008800; font-weight: bold">else</span>
            {
                <span style="color: #008800; font-weight: bold">if</span> (a[i <span style="color: #333333">+</span> x][j <span style="color: #333333">+</span> y] <span style="color: #333333">!=</span> <span style="color: #0000DD; font-weight: bold">0</span>)
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
            }
        }
    }
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
}

<span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">main</span>()
{
    scanf(<span style="background-color: #fff0f0">&quot;%d %d&quot;</span>, <span style="color: #333333">&amp;</span>n, <span style="color: #333333">&amp;</span>m);

    <span style="color: #333399; font-weight: bold">int</span> a[n][m];

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> m; j<span style="color: #333333">++</span>)
            scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>a[i][j]);

    <span style="color: #333399; font-weight: bold">int</span> out[<span style="color: #0000DD; font-weight: bold">3</span>] <span style="color: #333333">=</span> {<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>, <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">2</span>, <span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">2</span>};

    <span style="color: #333399; font-weight: bold">int</span> g_max <span style="color: #333333">=</span> (n <span style="color: #333333">&gt;</span> m) <span style="color: #333333">?</span> m <span style="color: #333333">:</span> n;

    <span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> t <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; t <span style="color: #333333">&lt;</span> g_max; t<span style="color: #333333">++</span>)
    {
        <span style="color: #008800; font-weight: bold">while</span> (i <span style="color: #333333">&lt;</span> n)
        {
            <span style="color: #008800; font-weight: bold">if</span> (i <span style="color: #333333">+</span> t <span style="color: #333333">&lt;</span> n <span style="color: #333333">&amp;&amp;</span> j <span style="color: #333333">+</span> t <span style="color: #333333">&lt;</span> m <span style="color: #333333">&amp;&amp;</span> gas(i, j, t <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>, a))
            {

                out[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">=</span> t;
                out[<span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">=</span> i;
                out[<span style="color: #0000DD; font-weight: bold">2</span>] <span style="color: #333333">=</span> j;
                <span style="color: #008800; font-weight: bold">break</span>;
            }
            j<span style="color: #333333">++</span>;
            <span style="color: #008800; font-weight: bold">if</span> (j <span style="color: #333333">==</span> m)
            {
                j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
                i<span style="color: #333333">++</span>;
            }
        }
        <span style="color: #008800; font-weight: bold">if</span> (out[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">!=</span> t)
            <span style="color: #008800; font-weight: bold">break</span>;
    }
    printf(<span style="background-color: #fff0f0">&quot;%d %d %d&quot;</span>, out[<span style="color: #0000DD; font-weight: bold">0</span>] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>, out[<span style="color: #0000DD; font-weight: bold">1</span>] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>, out[<span style="color: #0000DD; font-weight: bold">2</span>] <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);

    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}
<span style="color: #333333">---------------------------------</span>
<span style="color: #557799">#include &lt;stdio.h&gt;</span>
<span style="color: #557799">#include &lt;stdlib.h&gt;</span>

<span style="color: #333399; font-weight: bold">void</span> Scan(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> n){
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> n; j<span style="color: #333333">++</span>)
            scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>mat[i][j]);
    <span style="color: #008800; font-weight: bold">return</span>;
}

<span style="color: #333399; font-weight: bold">void</span> Print(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> n){
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>){
        printf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, mat[i][<span style="color: #0000DD; font-weight: bold">0</span>]);
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>; j <span style="color: #333333">&lt;</span> n; j<span style="color: #333333">++</span>)
            printf(<span style="background-color: #fff0f0">&quot; %d&quot;</span>, mat[i][j]);
        printf(<span style="background-color: #fff0f0">&quot;</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>);
    }
    <span style="color: #008800; font-weight: bold">return</span>;
}

<span style="color: #333399; font-weight: bold">void</span> rotateLeft(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> N){
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> x <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; x <span style="color: #333333">&lt;</span> N <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span>; x<span style="color: #333333">++</span>) { 
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> y <span style="color: #333333">=</span> x; y <span style="color: #333333">&lt;</span> N <span style="color: #333333">-</span> x <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>; y<span style="color: #333333">++</span>) { 
            <span style="color: #333399; font-weight: bold">int</span> t <span style="color: #333333">=</span> mat[x][y]; 
            mat[x][y] <span style="color: #333333">=</span> mat[y][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> x]; 
            mat[y][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> x]  <span style="color: #333333">=</span> mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> x][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> y]; 
            mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> x][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> y] <span style="color: #333333">=</span> mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> y][x]; 
            mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> y][x] <span style="color: #333333">=</span> t; 
        }
    }
}

<span style="color: #333399; font-weight: bold">void</span> rotateRight(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> N){
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> N <span style="color: #333333">/</span> <span style="color: #0000DD; font-weight: bold">2</span>; i<span style="color: #333333">++</span>) {
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> i; j <span style="color: #333333">&lt;</span> N <span style="color: #333333">-</span> i <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span>; j<span style="color: #333333">++</span>) {
            <span style="color: #333399; font-weight: bold">int</span> temp <span style="color: #333333">=</span> mat[i][j];
            mat[i][j] <span style="color: #333333">=</span> mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> j][i];
            mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> j][i] <span style="color: #333333">=</span> mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> i][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> j];
            mat[N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> i][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> j] <span style="color: #333333">=</span> mat[j][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> i];
            mat[j][N <span style="color: #333333">-</span> <span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #333333">-</span> i] <span style="color: #333333">=</span> temp;
        }
    }
}

<span style="color: #333399; font-weight: bold">void</span> flipHorizontal(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> n){
    <span style="color: #333399; font-weight: bold">int</span> i, j, temp;
    <span style="color: #008800; font-weight: bold">for</span>(i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>){
        <span style="color: #008800; font-weight: bold">for</span>(j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> (n<span style="color: #333333">/</span><span style="color: #0000DD; font-weight: bold">2</span>); j<span style="color: #333333">++</span>){
            temp <span style="color: #333333">=</span> mat[i][j];
            mat[i][j] <span style="color: #333333">=</span> mat[i][n<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">-</span>j];
            mat[i][n<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span><span style="color: #333333">-</span>j] <span style="color: #333333">=</span> temp;
        }
    }
}

<span style="color: #333399; font-weight: bold">void</span> flipVertical(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> n){
    rotateRight(mat, n);
    flipHorizontal(mat, n);
    rotateLeft(mat, n);
}

<span style="color: #333399; font-weight: bold">void</span> flipDiagonal(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> n){
    <span style="color: #333399; font-weight: bold">int</span> i, j, temp;
    <span style="color: #008800; font-weight: bold">for</span>(i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>){
        <span style="color: #008800; font-weight: bold">for</span>(j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> i; j<span style="color: #333333">++</span>){
            temp <span style="color: #333333">=</span> mat[i][j];
            mat[i][j] <span style="color: #333333">=</span> mat[j][i];
            mat[j][i] <span style="color: #333333">=</span> temp;
        }
    }
}

<span style="color: #333399; font-weight: bold">void</span> flipAntiDiagonal(<span style="color: #333399; font-weight: bold">int</span> <span style="color: #333333">**</span> mat, <span style="color: #333399; font-weight: bold">int</span> n){
    rotateRight(mat, n);
    flipDiagonal(mat, n);
    rotateLeft(mat, n);
}

<span style="color: #333399; font-weight: bold">int</span> main(){
    <span style="color: #333399; font-weight: bold">int</span> n, <span style="color: #333333">**</span>mat, i;
    scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>n);
    mat <span style="color: #333333">=</span> (<span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">**</span>)malloc(n <span style="color: #333333">*</span> <span style="color: #008800; font-weight: bold">sizeof</span>(<span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">*</span>));
    <span style="color: #008800; font-weight: bold">for</span>(i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        mat[i] <span style="color: #333333">=</span> (<span style="color: #333399; font-weight: bold">int</span><span style="color: #333333">*</span>)malloc(n <span style="color: #333333">*</span> <span style="color: #008800; font-weight: bold">sizeof</span>(<span style="color: #333399; font-weight: bold">int</span>));
    
    Scan(mat, n);
    
    <span style="color: #333399; font-weight: bold">char</span> ch<span style="color: #333333">=</span>getchar();
    <span style="color: #008800; font-weight: bold">while</span>(<span style="color: #0000DD; font-weight: bold">1</span>){
        ch <span style="color: #333333">=</span> getchar();
        <span style="color: #008800; font-weight: bold">if</span>(ch <span style="color: #333333">==</span> <span style="color: #0044DD">&#39;X&#39;</span>) <span style="color: #008800; font-weight: bold">break</span>;
        <span style="color: #008800; font-weight: bold">switch</span>(ch){
            <span style="color: #008800; font-weight: bold">case</span> <span style="color: #0044DD">&#39;L&#39;</span>: rotateLeft(mat, n);       <span style="color: #008800; font-weight: bold">break</span>;
            <span style="color: #008800; font-weight: bold">case</span> <span style="color: #0044DD">&#39;R&#39;</span>: rotateRight(mat, n);      <span style="color: #008800; font-weight: bold">break</span>;
            <span style="color: #008800; font-weight: bold">case</span> <span style="color: #0044DD">&#39;H&#39;</span>: flipHorizontal(mat, n);   <span style="color: #008800; font-weight: bold">break</span>;
            <span style="color: #008800; font-weight: bold">case</span> <span style="color: #0044DD">&#39;V&#39;</span>: flipVertical(mat, n);     <span style="color: #008800; font-weight: bold">break</span>;
            <span style="color: #008800; font-weight: bold">case</span> <span style="color: #0044DD">&#39;D&#39;</span>: flipDiagonal(mat, n);     <span style="color: #008800; font-weight: bold">break</span>;
            <span style="color: #008800; font-weight: bold">case</span> <span style="color: #0044DD">&#39;A&#39;</span>: flipAntiDiagonal(mat, n); <span style="color: #008800; font-weight: bold">break</span>;
        }
    }
    
    Print(mat, n);
    
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}
<span style="color: #333333">--------------------------------------</span>
<span style="color: #557799">#include&lt;stdio.h&gt;</span>
<span style="color: #008800; font-weight: bold">const</span> <span style="color: #333399; font-weight: bold">int</span> N<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">4</span>; <span style="color: #888888">// Main matrix size</span>

<span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">check_diagonal</span>(<span style="color: #333399; font-weight: bold">int</span> A[][N], <span style="color: #333399; font-weight: bold">int</span> S, <span style="color: #333399; font-weight: bold">int</span> tx, <span style="color: #333399; font-weight: bold">int</span> ty) 
{
    <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> x<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; x<span style="color: #333333">&lt;</span>S; x<span style="color: #333333">++</span>){
        <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> y<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; y<span style="color: #333333">&lt;</span>S; y<span style="color: #333333">++</span>){
            <span style="color: #008800; font-weight: bold">if</span>(x<span style="color: #333333">!=</span>y<span style="color: #333333">&amp;&amp;</span>A[tx<span style="color: #333333">+</span>x][ty<span style="color: #333333">+</span>y]<span style="color: #333333">!=</span><span style="color: #0000DD; font-weight: bold">0</span>)
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
            <span style="color: #008800; font-weight: bold">if</span>(x<span style="color: #333333">==</span>y<span style="color: #333333">&amp;&amp;</span>A[tx<span style="color: #333333">+</span>x][ty<span style="color: #333333">+</span>y]<span style="color: #333333">==</span><span style="color: #0000DD; font-weight: bold">0</span>)
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
        }
    }
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
}

<span style="color: #333399; font-weight: bold">int</span> <span style="color: #0066BB; font-weight: bold">main</span>(){
    <span style="color: #333399; font-weight: bold">int</span> a[N][N];
    
    <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; i<span style="color: #333333">&lt;</span>N; i<span style="color: #333333">++</span>)
        <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> j<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; j<span style="color: #333333">&lt;</span>N; j<span style="color: #333333">++</span>)
            scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>a[i][j]);
            
    <span style="color: #333399; font-weight: bold">int</span> out[<span style="color: #0000DD; font-weight: bold">3</span>] <span style="color: #333333">=</span> {<span style="color: #0000DD; font-weight: bold">0</span>};
    <span style="color: #333399; font-weight: bold">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>,j<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;
    <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> s<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>; s<span style="color: #333333">&lt;</span>N; s<span style="color: #333333">++</span>){
        <span style="color: #008800; font-weight: bold">while</span>(i<span style="color: #333333">&lt;</span>N){
            <span style="color: #008800; font-weight: bold">if</span>(i<span style="color: #333333">+</span>s<span style="color: #333333">&lt;</span>N<span style="color: #333333">&amp;&amp;</span>j<span style="color: #333333">+</span>s<span style="color: #333333">&lt;</span>N){
                <span style="color: #008800; font-weight: bold">if</span>(check_diagonal(a, s<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>,i ,j)){
                    out[<span style="color: #0000DD; font-weight: bold">0</span>]<span style="color: #333333">=</span>s<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>;
                    out[<span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">=</span>i<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>;
                    out[<span style="color: #0000DD; font-weight: bold">2</span>]<span style="color: #333333">=</span>j<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>;
                    <span style="color: #008800; font-weight: bold">break</span>;
                }
            }
            j<span style="color: #333333">++</span>;
            <span style="color: #008800; font-weight: bold">if</span>(j<span style="color: #333333">==</span>N){
                j<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;
                i<span style="color: #333333">++</span>;
            }
        }
        i<span style="color: #333333">=</span>out[<span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>;
        j<span style="color: #333333">=</span>out[<span style="color: #0000DD; font-weight: bold">2</span>]<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>;
        <span style="color: #008800; font-weight: bold">if</span>(out[<span style="color: #0000DD; font-weight: bold">0</span>]<span style="color: #333333">!=</span>s<span style="color: #333333">+</span><span style="color: #0000DD; font-weight: bold">1</span>)
            <span style="color: #008800; font-weight: bold">break</span>;
    }
    printf(<span style="background-color: #fff0f0">&quot;%d %d %d&quot;</span>, out[<span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>, out[<span style="color: #0000DD; font-weight: bold">2</span>]<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>, out[<span style="color: #0000DD; font-weight: bold">0</span>]);
    
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}
<span style="color: #333333">------------------------</span>
<span style="color: #557799">#include &lt;stdio.h&gt;</span>
<span style="color: #557799">#include &lt;math.h&gt;</span>

<span style="color: #333399; font-weight: bold">void</span> flush(<span style="color: #333399; font-weight: bold">int</span> a[], <span style="color: #333399; font-weight: bold">int</span> n){
    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        a[i] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}

<span style="color: #333399; font-weight: bold">int</span> Rowcheck(<span style="color: #333399; font-weight: bold">int</span> i, <span style="color: #333399; font-weight: bold">int</span> n, <span style="color: #333399; font-weight: bold">int</span> a[n][n]){
    <span style="color: #333399; font-weight: bold">int</span> count[n];
    flush(count, n);

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> n; j<span style="color: #333333">++</span>){
        <span style="color: #333399; font-weight: bold">int</span> x <span style="color: #333333">=</span> a[i][j];

        <span style="color: #008800; font-weight: bold">if</span> (<span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #333333">&lt;</span> x <span style="color: #333333">&amp;&amp;</span> x <span style="color: #333333">&lt;</span> n <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>){
            x<span style="color: #333333">--</span>;
            <span style="color: #008800; font-weight: bold">if</span> (count[x] <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">1</span>){
                printf(<span style="background-color: #fff0f0">&quot;Row %d is invalid</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>, i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
            }

            count[x] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        }<span style="color: #008800; font-weight: bold">else</span>{
            printf(<span style="background-color: #fff0f0">&quot;Row %d is invalid</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>, i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        }
    }
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}

<span style="color: #333399; font-weight: bold">int</span> Colcheck(<span style="color: #333399; font-weight: bold">int</span> i, <span style="color: #333399; font-weight: bold">int</span> n, <span style="color: #333399; font-weight: bold">int</span> a[n][n]){
    <span style="color: #333399; font-weight: bold">int</span> count[n];
    flush(count, n);

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> n; j<span style="color: #333333">++</span>){
        <span style="color: #333399; font-weight: bold">int</span> x <span style="color: #333333">=</span> a[j][i];

        <span style="color: #008800; font-weight: bold">if</span> (<span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #333333">&lt;</span> x <span style="color: #333333">&amp;&amp;</span> x <span style="color: #333333">&lt;</span> n <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>){
            x<span style="color: #333333">--</span>;
            <span style="color: #008800; font-weight: bold">if</span> (count[x] <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">1</span>){
                printf(<span style="background-color: #fff0f0">&quot;Column %d is invalid</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>, i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
            }

            count[x] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        }<span style="color: #008800; font-weight: bold">else</span>{
            printf(<span style="background-color: #fff0f0">&quot;Column %d is invalid</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>, i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
            <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
        }
    }
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}

<span style="color: #333399; font-weight: bold">int</span> Boxcheck(<span style="color: #333399; font-weight: bold">int</span> i, <span style="color: #333399; font-weight: bold">int</span> n, <span style="color: #333399; font-weight: bold">int</span> a[n][n]){
    <span style="color: #333399; font-weight: bold">int</span> count[n];
    flush(count, n);
    <span style="color: #333399; font-weight: bold">int</span> k <span style="color: #333333">=</span> (<span style="color: #333399; font-weight: bold">int</span>)sqrt(n);
    <span style="color: #333399; font-weight: bold">int</span> p <span style="color: #333333">=</span> ((<span style="color: #333399; font-weight: bold">int</span>)(i <span style="color: #333333">/</span> k)) <span style="color: #333333">*</span> k;
    <span style="color: #333399; font-weight: bold">int</span> q <span style="color: #333333">=</span> ((<span style="color: #333399; font-weight: bold">int</span>)(i <span style="color: #333333">%</span> k)) <span style="color: #333333">*</span> k;

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> t1 <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; t1 <span style="color: #333333">&lt;</span> k; t1<span style="color: #333333">++</span>){
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> t2 <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; t2 <span style="color: #333333">&lt;</span> k; t2<span style="color: #333333">++</span>){
            <span style="color: #333399; font-weight: bold">int</span> x <span style="color: #333333">=</span> a[p <span style="color: #333333">+</span> t1][q <span style="color: #333333">+</span> t2];

            <span style="color: #008800; font-weight: bold">if</span> (<span style="color: #0000DD; font-weight: bold">0</span> <span style="color: #333333">&lt;</span> x <span style="color: #333333">&amp;&amp;</span> x <span style="color: #333333">&lt;</span> n <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>){
                x<span style="color: #333333">--</span>;
                <span style="color: #008800; font-weight: bold">if</span> (count[x] <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">1</span>){
                    printf(<span style="background-color: #fff0f0">&quot;Box %d is invalid</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>, i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
                    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
                }

                count[x] <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>;
            }<span style="color: #008800; font-weight: bold">else</span>{
                printf(<span style="background-color: #fff0f0">&quot;Box %d is invalid</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #fff0f0">&quot;</span>, i <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">1</span>);
                <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">1</span>;
            }
        }
    }
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}

<span style="color: #333399; font-weight: bold">int</span> main(){
    <span style="color: #333399; font-weight: bold">int</span> n;
    scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>n);

    <span style="color: #333399; font-weight: bold">int</span> a[n][n];

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> j <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; j <span style="color: #333333">&lt;</span> n; j<span style="color: #333333">++</span>)
            scanf(<span style="background-color: #fff0f0">&quot;%d&quot;</span>, <span style="color: #333333">&amp;</span>a[i][j]);
    <span style="color: #333399; font-weight: bold">int</span> h <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        h <span style="color: #333333">+=</span> Rowcheck(i, n, a);

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        h <span style="color: #333333">+=</span> Colcheck(i, n, a);

    <span style="color: #008800; font-weight: bold">for</span> (<span style="color: #333399; font-weight: bold">int</span> i <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>; i <span style="color: #333333">&lt;</span> n; i<span style="color: #333333">++</span>)
        h <span style="color: #333333">+=</span> Boxcheck(i, n, a);

    <span style="color: #008800; font-weight: bold">if</span> (h <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>)
        printf(<span style="background-color: #fff0f0">&quot;Valid Sudoku&quot;</span>);

    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #0000DD; font-weight: bold">0</span>;
}
</pre></div>
